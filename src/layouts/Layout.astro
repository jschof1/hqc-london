---
import '../styles/global.css';
import Footer from '../components/Footer.astro';

export interface Props {
  title: string;
  description?: string;
}

const { title, description = "High Quality Cleaning ‚Äî Luxury home cleaning for discerning London clients." } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta name="description" content={description} />
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="bingbot" content="index, follow" />
    <meta name="yandexbot" content="index, follow" />
    <meta name="google" content="notranslate" />
    <meta name="google" content="notranslate" />
    <link rel="icon" href="/favicon.ico" />
    <title>{title}</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Import Global Styles (includes Tailwind) -->
    <style>
      .ar-16-9 {
        position: relative;
        width: 100%;
        padding-top: 56.25%;
      }
      .ar-16-9 > * {
        position: absolute;
        inset: 0;
      }
      .parallax {
        background-attachment: fixed;
        background-position: center;
        background-size: cover;
      }
      .ba-container {
        position: relative;
        overflow: hidden;
      }
      .ba-img,
      .ba-svg {
        position: absolute;
        inset: 0;
        height: 100%;
        width: 100%;
        object-fit: cover;
      }
      .ba-after-wrap {
        position: absolute;
        inset: 0;
        overflow: hidden;
      }
      .ba-handle {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 2px;
        background: #c9a961;
        cursor: ew-resize;
      }
      .ba-dot {
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 28px;
        height: 28px;
        border-radius: 9999px;
        background: #c9a961;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .ar-16-6 {
        position: relative;
        width: 100%;
        padding-top: 37.5%;
      }
      .ar-16-6 > * {
        position: absolute;
        inset: 0;
      }
      .accordion-content {
        display: none;
      }
      .accordion.open .accordion-content {
        display: block;
      }
      .sticky-col {
        position: sticky;
        left: 0;
        background: #ffffff;
        z-index: 10;
      }

      /* View Transitions Custom Animations - More Subtle */
      ::view-transition-old(root),
      ::view-transition-new(root) {
        animation-duration: 400ms;
        animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
      }

      ::view-transition-old(root) {
        animation-name: subtle-fade-out;
      }

      ::view-transition-new(root) {
        animation-name: subtle-fade-in;
      }

      @keyframes subtle-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      @keyframes subtle-fade-in {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      /* Smooth page transition for content areas */
      .page-transition {
        view-transition-name: page-content;
      }

      ::view-transition-old(page-content),
      ::view-transition-new(page-content) {
        animation-duration: 500ms;
        animation-timing-function: cubic-bezier(0.2, 0, 0.2, 1);
      }

      ::view-transition-old(page-content) {
        animation-name: content-fade-out;
      }

      ::view-transition-new(page-content) {
        animation-name: content-fade-in;
      }

      @keyframes content-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      @keyframes content-fade-in {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      /* Hero section specific transition - Images fade subtly */
      .hero-transition {
        view-transition-name: hero-section;
      }

      ::view-transition-old(hero-section),
      ::view-transition-new(hero-section) {
        animation-duration: 600ms;
        animation-timing-function: cubic-bezier(0.2, 0, 0.2, 1);
      }

      ::view-transition-old(hero-section) {
        animation-name: hero-image-fade-out;
      }

      ::view-transition-new(hero-section) {
        animation-name: hero-image-fade-in;
      }

      @keyframes hero-image-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      @keyframes hero-image-fade-in {
        0% {
          opacity: 0;
        }
        70% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      /* Navigation transition */
      .nav-transition {
        view-transition-name: navigation;
      }

      ::view-transition-old(navigation),
      ::view-transition-new(navigation) {
        animation-duration: 300ms;
        animation-timing-function: ease-out;
      }

      /* Card transitions for gallery and service pages */
      .card-transition {
        view-transition-name: var(--card-name);
      }

      /* Image-specific transitions */
      .image-transition {
        view-transition-name: page-image;
      }

      ::view-transition-old(page-image),
      ::view-transition-new(page-image) {
        animation-duration: 700ms;
        animation-timing-function: cubic-bezier(0.2, 0, 0.2, 1);
      }

      ::view-transition-old(page-image) {
        animation-name: image-subtle-fade-out;
      }

      ::view-transition-new(page-image) {
        animation-name: image-subtle-fade-in;
      }

      @keyframes image-subtle-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      @keyframes image-subtle-fade-in {
        0% {
          opacity: 0;
        }
        60% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      /* Text-specific transitions - delayed entry */
      .text-transition {
        view-transition-name: page-text;
      }

      ::view-transition-old(page-text),
      ::view-transition-new(page-text) {
        animation-duration: 800ms;
        animation-timing-function: cubic-bezier(0.2, 0, 0.2, 1);
      }

      ::view-transition-old(page-text) {
        animation-name: text-fade-out;
      }

      ::view-transition-new(page-text) {
        animation-name: text-delayed-fade-in;
      }

      @keyframes text-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      @keyframes text-delayed-fade-in {
        0% {
          opacity: 0;
        }
        75% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      /* Reduce motion for users who prefer it */
      @media (prefers-reduced-motion: reduce) {
        ::view-transition-old(root),
        ::view-transition-new(root),
        ::view-transition-old(page-content),
        ::view-transition-new(page-content),
        ::view-transition-old(hero-section),
        ::view-transition-new(hero-section),
        ::view-transition-old(navigation),
        ::view-transition-new(navigation),
        ::view-transition-old(page-image),
        ::view-transition-new(page-image),
        ::view-transition-old(page-text),
        ::view-transition-new(page-text) {
          animation-duration: 150ms;
          animation-timing-function: ease;
        }

        @keyframes fade-out {
          0%, 100% {
            transform: none;
            filter: none;
          }
        }
        
        @keyframes fade-in {
          0%, 100% {
            transform: none;
            filter: none;
          }
        }
        
        @keyframes slide-out-up {
          0%, 100% {
            transform: none;
            filter: none;
          }
        }
        
        @keyframes slide-in-up {
          0%, 100% {
            transform: none;
            filter: none;
          }
        }
        
        @keyframes hero-fade-out {
          0%, 100% {
            transform: none;
            filter: none;
          }
        }
        
        @keyframes hero-fade-in {
          0%, 100% {
            transform: none;
            filter: none;
          }
        }
      }
    </style>
  </head>
  <body class="bg-mist text-ink font-display antialiased">
    <slot />
    <Footer />
    
    <script src="../scripts/main.js"></script>
    
    <!-- Debug View Transitions (remove in production) -->
    <script>
      if (typeof window !== 'undefined' && window.location.hostname === 'localhost') {
        console.log('üé¨ View Transitions Debug Mode Active');
        console.log('ViewTransition API available:', !!document.startViewTransition);
        
        // Log all transition events
        ['astro:before-preparation', 'astro:after-preparation', 'astro:before-swap', 'astro:after-swap', 'astro:page-load'].forEach(event => {
          document.addEventListener(event, () => {
            console.log(`üìç ${event} fired`);
          });
        });
      }
    </script>
  </body>
</html>
