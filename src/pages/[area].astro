---
import Layout from '../layouts/Layout.astro';
import areaData from '../data/area-data.json';
import Header from '../components/Header.astro';

export async function getStaticPaths() {
  const areas = Object.keys(areaData) as Array<keyof typeof areaData>;
  return areas.map(area => ({
    params: { area },
    props: { areaInfo: areaData[area] }
  }));
}

const { area } = Astro.params;
const { areaInfo } = Astro.props;

// Helper function for repeat logic (for star ratings)
function repeat(count: number): number[] {
  return Array.from({ length: count }, (_, i) => i);
}
---

<Layout title={areaInfo.pageTitle} description={areaInfo.metaDescription}>
  <Header />
  <main class="page-transition pt-16">
    <!-- Page Header -->
    <section class="bg-navy relative">
      <div class="ar-16-9">
        <img
          src={areaInfo.heroImage}
          alt={areaInfo.heroImageAlt}
          class="w-full h-full object-cover opacity-40"
          fetchpriority="high"
        />
        <div class="absolute inset-0 flex items-end pb-10 md:pb-16 px-4 sm:px-6 lg:px-8 grain">
          <div class="mx-auto max-w-5xl w-full">
            <h1 class="font-serif text-3xl md:text-5xl text-gold mb-4">
              {areaInfo.heroHeading}
            </h1>
            <p class="text-white/85 text-sm md:text-base max-w-3xl leading-relaxed">
              {areaInfo.heroSubheading}
            </p>

            <div class="mt-6 flex flex-col sm:flex-row gap-3">
              <a href="#services" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 9999px; background-color: #C9A961; color: #2C3E50; padding: 0.75rem 1.25rem; font-size: 0.875rem; font-weight: 500; border: 1px solid #C9A961; box-shadow: 0 10px 30px rgba(0,0,0,0.10), 0 4px 10px rgba(0,0,0,0.06); transition: all 0.2s; text-decoration: none;" onmouseover="this.style.backgroundColor='rgba(201, 169, 97, 0.9)'" onmouseout="this.style.backgroundColor='#C9A961'">
                <i class="fas fa-list mr-2"></i>View Services
              </a>
              <a href="#quote" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 9999px; border: 1px solid #C9A961; padding: 0.75rem 1.25rem; color: #C9A961; font-size: 0.875rem; background-color: transparent; transition: all 0.2s; text-decoration: none;" onmouseover="this.style.backgroundColor='rgba(255, 255, 255, 0.05)'" onmouseout="this.style.backgroundColor='transparent'">
                <i class="fas fa-phone mr-2"></i>Get Quote
              </a>
            </div>

            <div class="mt-6 flex items-center gap-6 text-xs text-white/70 flex-wrap">
              <span class="inline-flex items-center gap-2">
                <i class="fas fa-map-marked-alt text-gold"></i>
                {areaInfo.postcodes.join(', ')} Postcodes
              </span>
              <span class="h-3 w-px bg-white/30"></span>
              <span class="inline-flex items-center gap-2">
                <i class="fas fa-award text-gold"></i>
                Premium Service Standards
              </span>
              <span class="h-3 w-px bg-white/30"></span>
              <span class="inline-flex items-center gap-2">
                <i class="fas fa-clock text-gold"></i>
                Flexible Scheduling
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Area Section -->
    <section class="py-16 md:py-20 bg-white">
      <div class="mx-auto max-w-6xl px-6">
        <div class="grid lg:grid-cols-2 gap-12 items-start">
          <div>
            <h2 class="font-serif text-2xl md:text-3xl text-navy mb-6">{areaInfo.aboutArea.heading}</h2>
            <div class="prose prose-lg text-ink/80 space-y-4">
              {areaInfo.aboutArea.content.map(paragraph => (
                <p class="leading-relaxed">{paragraph}</p>
              ))}
            </div>
          </div>
          <div class="bg-mist rounded-2xl p-8">
            <h3 class="font-serif text-xl text-navy mb-4">Quick Facts</h3>
            <div class="space-y-3">
              <div class="flex items-center gap-3">
                <i class="fas fa-map-pin text-gold"></i>
                <span class="text-sm"><strong>Region:</strong> {areaInfo.region}</span>
              </div>
              <div class="flex items-center gap-3">
                <i class="fas fa-mail-bulk text-gold"></i>
                <span class="text-sm"><strong>Postcodes:</strong> {areaInfo.postcodes.join(', ')}</span>
              </div>
              <div class="flex items-center gap-3">
                <i class="fas fa-home text-gold"></i>
                <span class="text-sm"><strong>Property Types:</strong> Luxury residences, heritage homes</span>
              </div>
              <div class="flex items-center gap-3">
                <i class="fas fa-shield-alt text-gold"></i>
                <span class="text-sm"><strong>Service Level:</strong> Premium concierge-grade</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Service Areas -->
    <section class="py-16 bg-mist">
      <div class="mx-auto max-w-7xl px-6">
        <h2 class="font-serif text-2xl md:text-3xl text-navy mb-8 text-center">{areaInfo.serviceAreas.heading}</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {areaInfo.serviceAreas.areas.map(area => (
            <div class="service-card bg-white rounded-xl p-6 border border-gold/20 shadow-soft">
              <h3 class="font-semibold text-navy mb-3">{area.name}</h3>
              <p class="text-ink/70 text-sm leading-relaxed">{area.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Why Choose Us -->
    <section class="py-16 bg-white">
      <div class="mx-auto max-w-7xl px-6">
        <h2 class="font-serif text-2xl md:text-3xl text-navy mb-12 text-center">{areaInfo.whyChooseUs.heading}</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
          {areaInfo.whyChooseUs.points.map(point => (
            <div class="text-center">
              <div class="w-16 h-16 mx-auto bg-gold/20 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-star text-gold text-2xl"></i>
              </div>
              <h3 class="font-semibold text-navy mb-3">{point.title}</h3>
              <p class="text-ink/70 text-sm leading-relaxed">{point.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="py-16 bg-navy">
      <div class="mx-auto max-w-7xl px-6">
        <div class="text-center mb-12">
          <h2 class="font-serif text-2xl md:text-3xl text-gold">{areaInfo.services.heading}</h2>
          <p class="mt-3 text-white/80 max-w-2xl mx-auto leading-relaxed">
            Comprehensive cleaning and property care services tailored to {areaInfo.name}'s unique requirements.
          </p>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
          {areaInfo.services.categories.map(category => (
            <div class="bg-navy/70 border border-gold rounded-xl p-6">
              <h3 class="font-semibold text-gold text-lg mb-4">{category.name}</h3>
              <ul class="space-y-2">
                {category.services.map(service => (
                  <li class="text-white/80 text-sm flex items-start gap-2">
                    <i class="fas fa-check text-gold text-xs mt-1 flex-shrink-0"></i>
                    <span>{service}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="py-16 bg-mist">
      <div class="mx-auto max-w-6xl px-6">
        <h2 class="font-serif text-2xl md:text-3xl text-navy mb-12 text-center">What Our {areaInfo.name} Clients Say</h2>
        <div class="grid md:grid-cols-3 gap-8">
          {areaInfo.testimonials.map(testimonial => (
            <div class="bg-white rounded-xl p-6 border border-gold/20 shadow-soft">
              <div class="flex items-center gap-1 mb-4">
                {repeat(testimonial.rating).map(() => (
                  <i class="fas fa-star text-gold text-sm"></i>
                ))}
              </div>
              <blockquote class="text-ink/80 text-sm leading-relaxed mb-4">
                "{testimonial.quote}"
              </blockquote>
              <cite class="text-xs text-ink/60 not-italic">— {testimonial.author}</cite>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Local Information -->
    <section class="py-16 bg-white">
      <div class="mx-auto max-w-7xl px-6">
        <h2 class="font-serif text-2xl md:text-3xl text-navy mb-12 text-center">Getting Around {areaInfo.name}</h2>
        <div class="grid md:grid-cols-3 gap-8">
          
          <!-- Transport -->
          <div class="text-center">
            <div class="w-16 h-16 mx-auto bg-gold/20 rounded-full flex items-center justify-center mb-4">
              <i class="fas fa-subway text-gold text-2xl"></i>
            </div>
            <h3 class="font-semibold text-navy mb-4">Transport Links</h3>
            <ul class="space-y-2 text-sm text-ink/70">
              {areaInfo.localInfo.transportLinks.map(link => (
                <li>{link}</li>
              ))}
            </ul>
          </div>

          <!-- Attractions -->
          <div class="text-center">
            <div class="w-16 h-16 mx-auto bg-gold/20 rounded-full flex items-center justify-center mb-4">
              <i class="fas fa-camera text-gold text-2xl"></i>
            </div>
            <h3 class="font-semibold text-navy mb-4">Nearby Attractions</h3>
            <ul class="space-y-2 text-sm text-ink/70">
              {areaInfo.localInfo.nearbyAttractions.map(attraction => (
                <li>{attraction}</li>
              ))}
            </ul>
          </div>

          <!-- Shopping & Dining -->
          <div class="text-center">
            <div class="w-16 h-16 mx-auto bg-gold/20 rounded-full flex items-center justify-center mb-4">
              <i class="fas fa-shopping-bag text-gold text-2xl"></i>
            </div>
            <h3 class="font-semibold text-navy mb-4">Shopping & Dining</h3>
            <ul class="space-y-2 text-sm text-ink/70">
              {areaInfo.localInfo.shoppingAndDining.map(item => (
                <li>{item}</li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing -->
    <section class="py-16 bg-gradient-to-r from-navy/5 to-gold/5">
      <div class="mx-auto max-w-6xl px-6">
        <div class="text-center mb-12">
          <h2 class="font-serif text-2xl md:text-3xl text-navy">{areaInfo.pricing.heading}</h2>
          <p class="mt-3 text-ink/70 max-w-2xl mx-auto">{areaInfo.pricing.note}</p>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          {areaInfo.pricing.packages.map(pkg => (
            <div class="bg-white rounded-xl border border-gold/30 shadow-soft overflow-hidden">
              <div class="p-6 border-b border-gold/20">
                <h3 class="font-semibold text-navy text-lg">{pkg.name}</h3>
                <div class="mt-2">
                  <span class="text-2xl font-bold text-gold">{pkg.price}</span>
                  <span class="text-sm text-ink/60 ml-2">{pkg.duration}</span>
                </div>
              </div>
              <div class="p-6">
                <ul class="space-y-3">
                  {pkg.features.map(feature => (
                    <li class="text-sm text-ink/70 flex items-start gap-2">
                      <i class="fas fa-check text-gold text-xs mt-1 flex-shrink-0"></i>
                      <span>{feature}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- FAQs -->
    <section class="py-16 bg-white">
      <div class="mx-auto max-w-4xl px-6">
        <h2 class="font-serif text-2xl md:text-3xl text-navy mb-12 text-center">Frequently Asked Questions</h2>
        <div class="space-y-4">
          {areaInfo.faqs.map(faq => (
            <div class="faq-item bg-mist rounded-xl border border-gold/20">
              <div class="faq-question p-6 flex items-center justify-between cursor-pointer" onclick="toggleFaq(this)">
                <h3 class="font-medium text-navy">{faq.question}</h3>
                <i class="fas fa-chevron-down text-gold transition-transform"></i>
              </div>
              <div class="faq-answer px-6 pb-0">
                <div class="pb-6 text-ink/80 text-sm leading-relaxed">
                  {faq.answer}
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Quote Form -->
    <section id="quote" class="py-16 bg-navy">
      <div class="mx-auto max-w-3xl px-6">
        <div class="text-center mb-8">
          <h2 class="font-serif text-2xl md:text-3xl text-gold">{areaInfo.contact.heading}</h2>
          <p class="mt-3 text-white/80 leading-relaxed">
            Ready to experience premium cleaning services in {areaInfo.name}? Get in touch for a personalized quote.
          </p>
        </div>
        
        <form class="grid gap-4 bg-navy/70 border border-gold rounded-2xl p-6 md:p-8"  action="https://api.web3forms.com/submit" method="POST" onsubmit="event.preventDefault(); alert('Thank you! Our {areaInfo.name} team will contact you within 2 hours.');">
          <input type="hidden" name="access_key" value="7b89af3e-dcb0-44ef-a37a-6e2b3c93d8da">
          <div class="grid md:grid-cols-2 gap-4">
            <label class="text-sm">
              <span class="block mb-1 text-white font-medium">Full Name</span>
              <input type="text" required class="w-full rounded-md px-3 py-2 border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold bg-white transition" placeholder="Your name" />
            </label>
            <label class="text-sm">
              <span class="block mb-1 text-white font-medium">Email</span>
              <input type="email" required class="w-full rounded-md px-3 py-2 border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold bg-white transition" placeholder="you@example.com" />
            </label>
          </div>
          <div class="grid md:grid-cols-2 gap-4">
            <label class="text-sm">
              <span class="block mb-1 text-white font-medium">Phone</span>
              <input type="tel" class="w-full rounded-md px-3 py-2 border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold bg-white transition" placeholder="0203 342 5260" />
            </label>
            <label class="text-sm">
              <span class="block mb-1 text-white font-medium">Postcode</span>
              <input type="text" required class="w-full rounded-md px-3 py-2 border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold bg-white transition" placeholder={areaInfo.postcodes.join(', ')} />
            </label>
          </div>
          <label class="text-sm">
            <span class="block mb-1 text-white font-medium">Service Requirements</span>
            <textarea rows="4" class="w-full rounded-md px-3 py-2 border border-gold/30 focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold bg-white transition" placeholder="Tell us about your property and cleaning requirements..."></textarea>
          </label>
          <div class="flex flex-col md:flex-row md:items-center gap-3 md:justify-between">
            <div class="text-xs text-white/70">
              <p><strong>{areaInfo.contact.hours}</strong></p>
              <p>{areaInfo.contact.emergencyNote}</p>
            </div>
            <button type="submit" style="display: inline-flex; align-items: center; justify-content: center; border-radius: 9999px; background-color: #C9A961; color: #2C3E50; padding: 0.75rem 1.25rem; font-size: 0.875rem; font-weight: 500; border: 1px solid #C9A961; box-shadow: 0 10px 30px rgba(0,0,0,0.10), 0 4px 10px rgba(0,0,0,0.06); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.backgroundColor='rgba(201, 169, 97, 0.9)'" onmouseout="this.style.backgroundColor='#C9A961'">
              <i class="fas fa-paper-plane mr-2"></i>Request Quote
            </button>
          </div>
        </form>

        <!-- Contact Details -->
        <div class="mt-8 text-center">
          <div class="inline-flex items-center gap-6 text-sm text-white/80">
            <a href={`tel:${areaInfo.contact.phone}`} class="flex items-center gap-2 hover:text-gold transition-colors">
              <i class="fas fa-phone"></i> 020 3342 5260
            </a>
            <a href=mailto:"sales@highqualityclean.co.uk" class="flex items-center gap-2 hover:text-gold transition-colors">
              <i class="fas fa-envelope"></i>sales@highqualityclean.co.uk
            </a>
            <a href={`https://wa.me/${areaInfo.contact.whatsapp}`} class="flex items-center gap-2 hover:text-gold transition-colors">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.787"/>
              </svg>WhatsApp
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer
    <footer class="bg-night relative">
      <div class="absolute inset-0 opacity-5" aria-hidden="true">
        <img
          src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80"
          alt="Granite texture background"
          class="w-full h-full object-cover"
        />
      </div>
      <div class="relative mx-auto max-w-7xl px-6 py-12">
        <div class="grid gap-10 md:grid-cols-4">
          <div class="md:col-span-2">
            <div class="flex items-center gap-3">
              <div class="h-9 w-9 rounded grid place-items-center bg-night border-2 border-gold">
                <span class="text-[10px] font-semibold text-gold">HQC</span>
              </div>
              <div class="font-serif text-lg text-gold">High Quality Clean</div>
            </div>
            <p class="mt-4 text-sm text-white/75 max-w-md leading-relaxed">
              Premium cleaning services for {areaInfo.name} and London's most prestigious areas. Professional, discreet, and reliable.
            </p>
            <div class="mt-4 text-sm text-white/60">
              © <span id="y"></span> High Quality Clean. All rights reserved.
            </div>
          </div>
          <div>
            <div class="font-medium text-gold mb-3">{areaInfo.name} Services</div>
            <ul class="space-y-2 text-sm text-white/80">
              <li><a href="#services" class="hover:text-gold transition-colors">Domestic Cleaning</a></li>
              <li><a href="#services" class="hover:text-gold transition-colors">Deep Cleaning</a></li>
              <li><a href="#services" class="hover:text-gold transition-colors">Specialist Care</a></li>
              <li><a href="../areas.html" class="hover:text-gold transition-colors">Other Areas</a></li>
            </ul>
          </div>
          <div>
            <div class="font-medium text-gold mb-3">Contact</div>
            <ul class="space-y-2 text-sm text-white/80">
              <li class="flex items-center gap-2">
                <i class="fas fa-phone text-gold"></i>
                <a href={`tel:${areaInfo.contact.phone}`} class="hover:text-gold transition-colors">{areaInfo.contact.phone}</a>
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4 text-gold" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.787"/>
                </svg>
                <a href={`https://wa.me/${areaInfo.contact.whatsapp}`} class="hover:text-gold transition-colors">WhatsApp</a>
              </li>
              <li class="flex items-center gap-2">
                <i class="fas fa-envelope text-gold"></i>
                <a href={`mailto:${areaInfo.contact.email}`} class="hover:text-gold transition-colors">{areaInfo.contact.email}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer> -->
  </main>

  <style>
    /* Critical CSS inlined for performance */
    .ar-16-9 {
      position: relative;
      width: 100%;
      padding-top: 56.25%;
    }
    .ar-16-9 > * {
      position: absolute;
      inset: 0;
    }
    .ar-4-3 {
      position: relative;
      width: 100%;
      padding-top: 75%;
    }
    .ar-4-3 > * {
      position: absolute;
      inset: 0;
    }
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .grain {
      background-image: radial-gradient(rgba(0, 0, 0, 0.04) 1px, transparent 1px);
      background-size: 3px 3px;
    }
    
    /* Typography improvements */
    h1, h2, h3 { line-height: 1.2; }
    p { line-height: 1.6; }
    
    /* Service card hover effects */
    .service-card {
      transition: all 0.3s ease;
    }
    .service-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.12), 0 6px 12px rgba(0,0,0,0.08);
    }
    
    /* FAQ styling */
    .faq-item {
      transition: all 0.3s ease;
    }
    .faq-question {
      cursor: pointer;
    }
    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    .faq-answer.open {
      max-height: 500px;
    }
  </style>

  <script is:inline>
    // Set current year (non-conflicting utility)
    const yearElement = document.getElementById("y");
    if (yearElement) {
      yearElement.textContent = new Date().getFullYear().toString();
    }

    // FAQ Toggle function (global for onclick handlers)
    window.toggleFaq = function(element) {
      const faqItem = element.parentElement;
      if (!faqItem) return;
      
      const answer = faqItem.querySelector('.faq-answer');
      const icon = element.querySelector('i');
      
      if (!answer || !icon) return;
      
      // Close all other FAQs
      document.querySelectorAll('.faq-item').forEach(item => {
        if (item !== faqItem) {
          const otherAnswer = item.querySelector('.faq-answer');
          const otherIcon = item.querySelector('i');
          if (otherAnswer) otherAnswer.classList.remove('open');
          if (otherIcon) otherIcon.style.transform = 'rotate(0deg)';
        }
      });
      
      // Toggle current FAQ
      answer.classList.toggle('open');
      if (answer.classList.contains('open')) {
        icon.style.transform = 'rotate(180deg)';
      } else {
        icon.style.transform = 'rotate(0deg)';
      }
    };
  </script>
</Layout>
