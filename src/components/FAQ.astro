---
import { faqData } from '../data/faq.js';
---

<section class="bg-white py-16 md:py-24">
  <div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="font-serif text-3xl md:text-4xl lg:text-5xl text-navy font-semibold mb-4">
        Frequently Asked Questions
      </h2>
      <p class="text-ink/70 text-lg max-w-2xl mx-auto">
        Everything you need to know about our premium cleaning services
      </p>
    </div>

    <div class="space-y-8">
      {faqData.map((section, sectionIndex) => (
        <div class="bg-mist rounded-xl border border-gold/20 p-6 md:p-8 shadow-soft">
          <h3 class="font-serif text-xl md:text-2xl text-navy font-semibold mb-6 flex items-center gap-3">
            <div class="h-8 w-8 rounded-full bg-navy border-2 border-gold flex items-center justify-center">
              <i class={`fas ${
                section.section === 'General' ? 'fa-info-circle' :
                section.section === 'Cleaning' ? 'fa-spray-can' :
                section.section === 'Quality' ? 'fa-star' :
                section.section === 'Price' ? 'fa-pound-sign' :
                section.section === 'Security' ? 'fa-shield-alt' :
                'fa-question-circle'
              } text-gold text-sm`}></i>
            </div>
            {section.section}
          </h3>
          
          <div class="space-y-4">
            {section.items.map((item, itemIndex) => {
              const accordionId = `faq-${sectionIndex}-${itemIndex}`;
              return (
                <div class="faq-item border border-gold/10 rounded-lg bg-white">
                  <button 
                    class="faq-trigger w-full text-left p-4 md:p-6 flex items-center justify-between hover:bg-gold/5 transition-colors focus:outline-none focus:ring-2 focus:ring-gold/50 rounded-lg"
                    data-target={accordionId}
                  >
                    <span class="font-medium text-navy pr-4">{item.question}</span>
                    <i class="fas fa-chevron-down text-gold transform transition-transform duration-200 flex-shrink-0"></i>
                  </button>
                  <div 
                    id={accordionId}
                    class="faq-content hidden overflow-hidden"
                  >
                    <div class="p-4 md:p-6 pt-0 text-ink/70 leading-relaxed">
                      {item.answer}
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      ))}
    </div>

    <!-- Contact CTA -->
    <div class="mt-12 text-center bg-navy rounded-xl p-8 md:p-12">
      <h3 class="font-serif text-2xl md:text-3xl text-white font-semibold mb-4">
        Still have questions?
      </h3>
      <p class="text-white/80 mb-6 max-w-md mx-auto">
        Our team is here to help. Get in touch for personalized answers.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="tel:02033425260"
          class="inline-flex items-center justify-center rounded-md bg-gold text-navy px-6 py-3 font-medium btn-hover focus-visible"
        >
          <i class="fas fa-phone mr-2"></i>
          Call 0203 342 5260
        </a>
        <a
          href="mailto:sales@highqualityclean.co.uk"
          class="inline-flex items-center justify-center rounded-md bg-transparent text-gold border border-gold px-6 py-3 font-medium btn-hover focus-visible"
        >
          <i class="fas fa-envelope mr-2"></i>
          Email Us
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  // FAQ Accordion functionality
  document.addEventListener('DOMContentLoaded', function() {
    const faqTriggers = document.querySelectorAll('.faq-trigger');
    
    faqTriggers.forEach((trigger) => {
      trigger.addEventListener('click', function(this: HTMLElement) {
        const targetId = this.getAttribute('data-target');
        if (!targetId) return;
        
        const content = document.getElementById(targetId);
        const icon = this.querySelector('i');
        if (!content || !icon) return;
        
        const isOpen = !content.classList.contains('hidden');
        
        // Close all other FAQs in the same section
        const currentItem = this.closest('.faq-item');
        const currentSection = this.closest('.bg-mist');
        if (!currentSection) return;
        
        const allItemsInSection = currentSection.querySelectorAll('.faq-item');
        
        allItemsInSection.forEach((item) => {
          if (item !== currentItem) {
            const otherContent = item.querySelector('.faq-content');
            const otherIcon = item.querySelector('.faq-trigger i');
            if (otherContent) otherContent.classList.add('hidden');
            if (otherIcon) otherIcon.classList.remove('rotate-180');
          }
        });
        
        // Toggle current FAQ
        if (isOpen) {
          content.classList.add('hidden');
          icon.classList.remove('rotate-180');
        } else {
          content.classList.remove('hidden');
          icon.classList.add('rotate-180');
        }
      });
    });
  });
</script>

